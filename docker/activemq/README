# ################################################################################
#ActiveMQ server
status: working

docker stop c-amq
docker rm c-amq
docker rmi i-amq
docker build -t i-amq .
docker run -d --name c-amq -p 8161:8161 -p 61616:61616 i-amq
docker stop c-amq
docker start c-amq
#docker exec -it c-amq /bin/bash

http://localhost:8161
username: admin
password: admin

# ################################################################################
# Microservide to Send random messages to ActiveMQ server

docker stop c-amqsend
docker rm c-amqsend
docker rmi i-amqsend

docker build -t i-amqsend .
docker run -d --name c-amqsend -p 8081:8080 i-amqsend

docker stop c-amqsend
docker start c-amqsend
#docker exec -it c-amqsend /bin/bash

export QUEUE=queue1
export MESSAGE="Hello World $RANDOM"
export WEBURL="http://localhost:8161"

# send msg via bash shell
curl -u admin:admin -d "body=${RANDOM}" "${WEBURL}/api/message/${QUEUE}?type=queue"

# receive msg via bash shell
curl -u admin:admin "${WEBURL}/api/message/${QUEUE}?type=queue&consumer=true&readTimeout=1000"

