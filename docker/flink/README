# ################################################################################
# purpose: flink stream processing/analytics
# status: working
#
Task: Flink starts task executor - task is to run app.jar at CSV_POLL_SECONDS second interval - java reads current/future csv files from directory (generated by i-csv-producer from same directory)
#
# build java code
mvn clean install -DskipTests
#
docker stop c-flink
docker rm c-flink
docker rmi i-flink
#
# build
docker build -t i-flink --platform "linux/amd64" .
#
# run
mkdir -p data/incoming
docker run -d --name c-flink -p 8152:8081 -v ./data:/data/ i-flink
#
# Optional:
	-e CSV_INPUT_DIR=data/incoming
	-e CSV_POLL_SECONDS=5
	-e CSV_SKIP_HEADER=true 
#
# generate data in ./data/incoming by running csv-producer from "flink" directory
docker run -d --name c-csv-producer -v $(PWD)/data:/data i-csv-producer
#
docker stop c-flink
docker start c-flink
#
# connect
docker exec -it c-flink /bin/bash
#
# logs
docker logs c-flink
#
# connect from webconsole
http://localhost:8152/  
#
# ################################################################################
