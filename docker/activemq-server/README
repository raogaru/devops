# ################################################################################
# ActiveMQ server - Apache opensource Messaging Queue service
# status: working
#
# network
docker network rm n-activemq
docker network create n-activemq
docker network ls
docker network inspect n-activemq
#
# volume
docker volume rm v-activemq
docker volume create v-activemq
docker volume list
docker volume inspect v-activemq
#
docker stop c-activemq
docker rm c-activemq
docker rmi i-activemq
#
# build
docker build -t i-activemq .
#
# run
docker run -d --name c-activemq --network "n-activemq" -v v-activemq:/opt/activemq/data -p 8161:8161 -p 61616:61616 i-activemq
#
#docker stop c-activemq
#docker start c-activemq
# connect
docker exec -it c-activemq /bin/bash
#
# access via webconsole
http://localhost:8161
username: admin
password: admin
#
# ################################################################################
# Microservide to Send random messages to ActiveMQ server

export QUEUE=queue0
export MESSAGE="Hello World $RANDOM"
export WEBURL="http://localhost:8161"

# send msg via bash shell
curl -u admin:admin -d "body=${RANDOM}" "${WEBURL}/api/message/${QUEUE}?type=queue"

# receive msg via bash shell
curl -u admin:admin "${WEBURL}/api/message/${QUEUE}?type=queue&consumer=true&readTimeout=1000"

# ################################################################################
